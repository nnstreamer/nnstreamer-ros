CMAKE_MINIMUM_REQUIRED(VERSION 2.8)

PROJECT(nnstreamer-ros C CXX)

SET(VERSION "0.0.3")
ADD_DEFINITIONS(-DVERSION="${VERSION}")

SET(PREFIX ${CMAKE_INSTALL_PREFIX})
SET(EXEC_PREFIX "${PREFIX}/bin")
SET(INCLUDE_INSTALL_DIR "${PREFIX}/include")

IF(CMAKE_INSTALL_LIBDIR)
ELSE(CMAKE_INSTALL_LIBDIR)
	SET(CMAKE_INSTALL_LIBDIR "lib")
ENDIF(CMAKE_INSTALL_LIBDIR)

IF(LIB_INSTALL_DIR)
ELSE(LIB_INSTALL_DIR)
    SET(LIB_INSTALL_DIR "${PREFIX}/${CMAKE_INSTALL_LIBDIR}")
ENDIF(LIB_INSTALL_DIR)

IF(GST_INSTALL_DIR)
ELSE(GST_INSTALL_DIR)
    SET(GST_INSTALL_DIR "${LIB_INSTALL_DIR}/gstreamer-1.0")
ENDIF(GST_INSTALL_DIR)

FIND_PACKAGE(PkgConfig REQUIRED)
SET(PKG_COMMON_MODULES
    glib-2.0
    gstreamer-1.0
    nnstreamer
)
PKG_CHECK_MODULES(PKGS_COMMON REQUIRED ${PKG_COMMON_MODULES})

INCLUDE_DIRECTORIES(
	./common/include
	${PKGS_COMMON_INCLUDE_DIRS}
	)

SET(c_flags -Wall -Werror -fPIC -g -std=c89)
SET(cxx_flags -Wall -Werror -fPIC -g -std=c++11)
ADD_COMPILE_OPTIONS(
  "$<$<COMPILE_LANGUAGE:C>:${c_flags}>"
  "$<$<COMPILE_LANGUAGE:CXX>:${cxx_flags}>"
)

ADD_SUBDIRECTORY(common)
ADD_SUBDIRECTORY(gst)
